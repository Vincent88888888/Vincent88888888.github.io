<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="John Doe"><title>JavaScript简明教程（4） · Hexo</title><meta name="description" content="本章节主要讲解了原型链及相关方法。

原型链及相关属性方法简单说明原型链代码示例1234567891011121314151617&amp;lt;script&amp;gt;    //01 提供Person构造函数    function Person(name,age) &amp;#123;        this.n"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Hexo</a></h3></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>JavaScript简明教程（4）</a></h3></div><div class="post-content"><blockquote>
<p>本章节主要讲解了原型链及相关方法。</p>
</blockquote>
<h1 id="原型链及相关属性方法简单说明"><a href="#原型链及相关属性方法简单说明" class="headerlink" title="原型链及相关属性方法简单说明"></a>原型链及相关属性方法简单说明</h1><h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><p><strong>代码示例</strong><br><a id="more"></a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//01 提供Person构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 设置Person的原型对象</span></div><div class="line">    Person.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//03 创建Student构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">number</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.numer = number</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//04 设置Student的原型对象</span></div><div class="line">    Student.prototype = <span class="keyword">new</span> Person();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p><strong>原型链图示例</strong><br><img src="/assets/img/Snip20170213_10.png" alt="原型"></p>
<h2 id="Object对象"><a href="#Object对象" class="headerlink" title="Object对象"></a>Object对象</h2><p><strong>Object构造函数</strong><br>01 使用Object构造函数创建字符串对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 创建字符串对象</span></div><div class="line"><span class="keyword">var</span> str1 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">"测试字符串"</span>);</div><div class="line"><span class="keyword">var</span> str2 = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="string">"测试字符串"</span>);</div><div class="line"><span class="keyword">var</span> str3 = str1;</div><div class="line"><span class="comment">//注意:对象比较相等(需要引用[地址]相等)</span></div><div class="line"><span class="built_in">console</span>.log(str1 == str2);      <span class="comment">//false</span></div><div class="line"><span class="built_in">console</span>.log(str1 === str2);     <span class="comment">//false</span></div><div class="line"><span class="built_in">console</span>.log(str1 === str3);     <span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p>02 使用Object构造函数创建数字对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="number">10</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num);    <span class="comment">//object</span></div></pre></td></tr></table></figure></p>
<p>03 使用Object构造函数创建布尔类型对象<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> bool = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="literal">true</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> bool);   <span class="comment">//object</span></div></pre></td></tr></table></figure></p>
<p><strong>js中所有的内置或自定义对象都继承自Object对象,几乎所有的对象都可以使用Object.prototype上面的属性和方法</strong></p>
<h2 id="Object-prototype"><a href="#Object-prototype" class="headerlink" title="Object.prototype"></a>Object.prototype</h2><p>01 因为js中所有的对象都继承自Obejct,都可以使用Object对象的原型属性和方法,因此不要轻易的扩展Object.prototype。<br>02 Object.property中的属性和方法</p>
<pre><code>① constructor 指向原型相关联的构造函数，为Object
② hasOwnProperty 判断对象中是否拥有某个实例属性(不包括原型链上面的属性)
③ isPrototypeOf  校验某个对象是否是指定对象的原型对象(整条原型链)
④ propertyIsEnumerable 属性是否存在且可枚举(使用for循环可以遍历,即目标属性能否在for循环中显示出来)
⑤ toString() 返回一个描述目标对象的字符串,对象则返回[object object]
   toString(参数) 参数出可以传入一个用于进制数的参数,该参数的默认值为10(主要针对Number类型有效)
⑥ toLocaleString 同toString,但是会做一些本地化的处理。
⑦ valueOf()  如果该对象有对应的基本数据类型的值,则返回对应的基本数据类型值,如果没有则返回this本身。
   Date对象调用该方法会返回一个时间戳。
</code></pre><p><strong>constructor</strong><br>说明：该属性指向创建该对象的构造函数，在这里为Object<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">var</span> p = <span class="keyword">new</span> Person();</div><div class="line">   <span class="built_in">console</span>.log(p.constructor);                     <span class="comment">//function Person() &#123;&#125;</span></div><div class="line">   <span class="built_in">console</span>.log(Person.prototype.constructor);      <span class="comment">//function Person() &#123;&#125;</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.constructor);      <span class="comment">//function Object() &#123; [native code] &#125;</span></div></pre></td></tr></table></figure></p>
<p><strong>hasOwnProperty</strong><br>说明：判断对象中是否拥有某个实例属性(不包括原型链上面的属性)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">"默认的姓名"</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//检查对象中是否拥有指定的属性(实例属性)</span></div><div class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">p1.hasOwnProperty(<span class="string">"name"</span>);  <span class="comment">//true</span></div><div class="line">p1.hasOwnProperty(<span class="string">"age"</span>);   <span class="comment">//false</span></div><div class="line">p1.hasOwnProperty(<span class="string">"constructor"</span>);   <span class="comment">//对象的constructor是从原型对象上继承的</span></div></pre></td></tr></table></figure></p>
<p><strong>isPrototypeOf</strong><br>说明：校验某个对象是否是指定对象的原型对象(整条原型链);<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> obj = &#123;</div><div class="line">        <span class="attr">name</span>:<span class="string">"张三"</span>,</div><div class="line">        <span class="attr">age</span>:<span class="number">20</span>,</div><div class="line">        <span class="attr">hello</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"hello"</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">showName</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//属性是否存在且可以枚举</span></div><div class="line">    <span class="built_in">console</span>.log(obj.propertyIsEnumerable(<span class="string">"name"</span>));      <span class="comment">//true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>toString</strong><br>说明：返回一个描述目标对象的字符串,对象则返回[object object]<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">    <span class="built_in">console</span>.log(obj.toString());  <span class="comment">//打印[object Object]</span></div><div class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</div><div class="line">    <span class="built_in">console</span>.log(arr.toString());    <span class="comment">//打印1,2,3,4,5</span></div><div class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;</div><div class="line">    <span class="built_in">console</span>.log(num.toString());               <span class="comment">//10</span></div><div class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="built_in">console</span>.log(date.toString());           <span class="comment">//Mon Feb 13 2017 19:00:13 GMT+0800 (CST)</span></div><div class="line">    <span class="comment">//toString方法可以传入参数,在处理Number类型数据的时候,可以传入指定的进制</span></div><div class="line">    <span class="built_in">console</span>.log(num.toString(<span class="number">2</span>));       <span class="comment">//1010  == 1*2*2*2+0*2*2+1*2+1*1 = 10</span></div><div class="line">    <span class="built_in">console</span>.log(num.toString(<span class="number">3</span>));       <span class="comment">//101   == 1*3*3 + 0*3 + 1*1 = 10</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>toLocaleString</strong><br>说明：作用同toString方法一致，但是会做一些本地化的处理.</p>
<p><strong>valueOf</strong><br>说明：<br>① 如果该对象有对应的基本数据类型的值,则返回对应的基本数据类型值,如果没有则返回this本身。<br>② 如果是Date类型，则返回时间戳。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">    <span class="built_in">console</span>.log(obj + <span class="number">1</span>);       <span class="comment">//[object Object]1</span></div><div class="line">    <span class="comment">//说明:如果该对象有对应的基本数据类型的值,则返回对应的基本数据类型值,如果没有则返回this本身。</span></div><div class="line">    <span class="keyword">var</span>  o = &#123;<span class="attr">name</span>:<span class="string">"张三"</span>&#125;;</div><div class="line">    <span class="built_in">console</span>.log(o + <span class="number">1</span>); <span class="comment">//[object Object]1</span></div><div class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="built_in">console</span>.log(date.valueOf());        <span class="comment">//1486984088998</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="静态成员和实例成员"><a href="#静态成员和实例成员" class="headerlink" title="静态成员和实例成员"></a>静态成员和实例成员</h2><p><strong>静态成员</strong><br>    定义在构造函数上面的成员(属性和方法)</p>
<p><strong>实例成员</strong><br>    定义在实例对象上面的成员(属性和方法)</p>
<p><strong>建议</strong></p>
<pre><code>① 把工具类的方法写成静态方法
② 把和对象相关的方法写成实例方法(成员)
</code></pre><p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = <span class="string">"张三"</span>;   <span class="comment">//实例属性</span></div><div class="line">        <span class="keyword">this</span>.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//为Person构造函数添加静态成员</span></div><div class="line">    Person.des = <span class="string">"描述信息"</span>;</div><div class="line">    Person.add = <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"添加信息"</span> + msg);</div><div class="line">    &#125;;</div><div class="line">    Person.add(<span class="string">"这是一个+操作"</span>);</div><div class="line">    <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</div><div class="line">    p1.showName();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<h2 id="Function构造函数"><a href="#Function构造函数" class="headerlink" title="Function构造函数"></a>Function构造函数</h2><p><strong>函数创建的几种方式</strong><br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">01</span> 函数声明</div><div class="line"><span class="number">02</span> 字面量的方式创建</div><div class="line"><span class="number">03</span> 使用<span class="keyword">new</span> <span class="built_in">Function</span>的形式创建</div></pre></td></tr></table></figure></p>
<p> <strong>函数创建代码示例</strong><br> <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">"函数声明"</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> func02 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">"字面量方式创建"</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//使用Function构造函数创建</span></div><div class="line">  <span class="keyword">var</span> func03 = <span class="keyword">new</span> <span class="built_in">Function</span>();</div></pre></td></tr></table></figure></p>
<p><strong>Function构造函数创建函数</strong><br>  参数说明:可以传入多个参数<br>  最后一个参数:<code>传入的最后一个参数为函数的函数体内容</code><br>  其他参数:创建出来的函数的参数<br>  如果只有一个参数,则表示这是该函数的函数体内容<br>  传递参数的格式:以字符串的方式进行传参<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//需求01 使用Function构造函数创建一个函数对象,该函数执行一行打印操作</span></div><div class="line"><span class="keyword">var</span> funcName01 = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"console.log('让我掉下眼泪的,不止昨夜的酒')"</span>);</div><div class="line">funcName01();</div><div class="line"><span class="comment">//需求02 使用Function构造函数创建一个函数对象,该函数需要接受两个参数,要求返回他们的和</span></div><div class="line"><span class="keyword">var</span> funcName02 = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"return a + b;"</span>);</div><div class="line"><span class="built_in">console</span>.log(funcName02(<span class="number">10</span>, <span class="number">20</span>));    <span class="comment">//30</span></div></pre></td></tr></table></figure></p>
<p><strong>解决函数体代码过长的问题</strong><br>（1）使用转义字符，写在一行中<br>（2）使用+操作符来拼接字符串<br>（3）使用``操作符来管理字符串<br>（4）使用模板先处理字符串，然后在js中获得模板中的内容</p>
<h2 id="arguments、length和callee"><a href="#arguments、length和callee" class="headerlink" title="arguments、length和callee"></a>arguments、length和callee</h2><p><strong>arguments参数</strong><br>说明：在js中的函数中，有两个隐藏的参数分别是this和arguments<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">arguments</span> 是一个类似数组的结构,可以通过下标来操作函数的参数,但并非数组类型的。</div><div class="line">在函数调用的时候,会将函数的所有参数都传入<span class="built_in">arguments</span>对象中保存,因此我们可以通过操作<span class="built_in">arguments</span>属性来操作参数</div><div class="line">形参的数量大于实参的数量,则依次传入,未传入的设置为<span class="literal">undefined</span></div><div class="line">形参的数量小于实参的数量,则<span class="built_in">arguments</span>中保存实际的值</div></pre></td></tr></table></figure></p>
<p><strong>length</strong></p>
<pre><code>函数内部的arguments数组拥有length属性,可以通过该属性获取用户调用时传入的实参的个数

函数本身有一个length属性,可以通过该属性来获取形式参数的个数
</code></pre><p><strong>callee方法</strong></p>
<pre><code>函数内部的arguments对象中,有一个callee方法,该方法指向函数自身,常用于匿名函数的递归调用。
</code></pre><p><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length);  <span class="comment">//调用函数时实际传入的参数数量</span></div><div class="line">    &#125;</div><div class="line">    func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</div><div class="line">    <span class="built_in">console</span>.log(func.length);           <span class="comment">//预期的参数数量 —— 函数的形参数量</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func02</span>(<span class="params">a,b</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(a, b);</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">    &#125;</div><div class="line">    func02(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);  <span class="comment">//实参的数量 &gt; 形参的数量 则arguments保存实参的值</span></div><div class="line">    func02(<span class="number">1</span>);      <span class="comment">//实参的数量 &lt; 形参的数量 则不足的补undefined</span></div><div class="line">    <span class="comment">//匿名函数调用</span></div><div class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">//如果需要在该函数中调用自身,则可以使用arguments.callee方法</span></div><div class="line">        <span class="built_in">arguments</span>.callee();</div><div class="line">    &#125;)();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<h2 id="Function的应用"><a href="#Function的应用" class="headerlink" title="Function的应用"></a>Function的应用</h2><p><strong>01 数组去重</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> func = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"arr"</span>,<span class="string">`</span></div><div class="line">    var array = [];</div><div class="line">    for(var i = 0 ; i&lt;arr.length; i++)</div><div class="line">    &#123;</div><div class="line">        if(array.indexOf(arr[i]) == -1)</div><div class="line">        &#123;</div><div class="line">            array.push(arr[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return array;</div><div class="line">`);</div><div class="line">    <span class="built_in">console</span>.log(func([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>]));;</div></pre></td></tr></table></figure></p>
<p><strong>02 返回传入函数中所有数据的最大值</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> maxNumber = <span class="built_in">arguments</span>[<span class="number">0</span>];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;<span class="built_in">arguments</span>.length;i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span> (maxNumber &lt; <span class="built_in">arguments</span>[i])</div><div class="line">        &#123;</div><div class="line">            maxNumber = <span class="built_in">arguments</span>[i];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> maxNumber;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">45</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">30</span>, <span class="number">21</span>));</div></pre></td></tr></table></figure></p>
<h2 id="eval-简单说明"><a href="#eval-简单说明" class="headerlink" title="eval 简单说明"></a>eval 简单说明</h2><p><strong>eval 的基本使用</strong><br>eval函数用来讲字符串转换为JS的代码,并执行</p>
<p><strong>eval 处理JSON数据代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> jsonData = <span class="string">'&#123;"name":"张三","age":18&#125;'</span>;</div><div class="line">    <span class="comment">//把json的数据转换为对象</span></div><div class="line">    <span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(jsonData);</div><div class="line">    <span class="built_in">console</span>.log(obj);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> jsonData = <span class="string">'&#123;"name":"张三","age":18&#125;'</span>;</div><div class="line">    <span class="comment">//var obj = eval(jsonData); //注意:如果直接这样写代码则会报错</span></div><div class="line">    <span class="comment">//正确的处理方式</span></div><div class="line">    <span class="comment">//方式一</span></div><div class="line">    <span class="built_in">eval</span>(<span class="string">"var obj = "</span> + jsonData);</div><div class="line">    <span class="built_in">console</span>.log(obj);</div><div class="line">    <span class="comment">//方式二</span></div><div class="line">    <span class="comment">//说明:使用eval来解析json格式字符串的时候,会将&#123;&#125;解析为代码块,而不是字面量</span></div><div class="line">    <span class="comment">// 在使用的时候为了避免这种错误,需要在JSO的最外面加上(),如此则会把大括号当做一条语句来解析</span></div><div class="line">    <span class="keyword">var</span> o = <span class="built_in">eval</span>(<span class="string">"("</span>+jsonData+<span class="string">")"</span>);</div><div class="line">    <span class="built_in">console</span>.log(o);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p><strong>eval 注意事项</strong></p>
<pre><code>① eval函数本身功能强大,但它的特性也为程序带来了很大的不确定性,因此在开发中并不推荐使用。
② eval函数是动态的执行代码,因此其效率不如直接执行静态脚本高。
</code></pre><p><strong>eval和Function比较</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">相同点:都能够把字符串转换为Javascript的代码</div><div class="line">不同点:eval转换为js的代码之后马上就执行,而Function需要先创建函数,调用函数之后才会执行。</div></pre></td></tr></table></figure></p>
<h2 id="Function-prototype原型链"><a href="#Function-prototype原型链" class="headerlink" title="Function.prototype原型链"></a>Function.prototype原型链</h2><p><strong>关于Function和自定义构造函数的原型对象</strong></p>
<pre><code>Function.prototype 是一个空的函数
自定义构造函数的原型对象是一个空的对象
</code></pre><p>说明</p>
<pre><code>Function也可以被当做是一个构造函数
通过new Function创建出来的函数,可以认为是Function的实例化对象。
Function的原型对象是一个空的函数,这个空的函数也是一个对象,它的原型对象是Object.prototype。
在JS中,Object的原型对象是所有对象的祖宗。

Function是构造函数,则其原型对象为空的函数
        空的函数的原型对象为Object.prototype
Function本身也是对象,则其构造函数为:function Function() { [native code] }  是自身
同Object类型
Object本身是构造函数,其原型对象是Object.prototype
Object本身也是对象,其构造函数为:function Function() { [native code]
</code></pre><p><strong>代码示例</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//01 提供Person构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 设置Person的原型对象</span></div><div class="line">    Person.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//03 创建Student构造函数</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">number</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.numer = number</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//04 设置Student的原型对象</span></div><div class="line">    Student.prototype = <span class="keyword">new</span> Person();</div></pre></td></tr></table></figure></p>
<p><strong>完整的原型链示意图</strong><br><img src="/assets/img/Snip20170213_12.png" alt="原型"><br><strong>Object和Function的关系</strong><br>01 Object构造函数是通过Function构造函数实例化出来的<br>02 Function构造函数也是通过Function构造函数实例化出来的</p>
<p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="comment">//检查对象是否是某个构造函数的实例</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>);</div><div class="line">    <span class="comment">//注意:以上打印结果均为true</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="对象的拷贝操作"><a href="#对象的拷贝操作" class="headerlink" title="对象的拷贝操作"></a>对象的拷贝操作</h2><p><strong>浅拷贝</strong><br>如果对象中的属性是引用类型的值,那么存在数据共享问题,修改某个对象会对拷贝的对象产生影响<br>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">name</span>:<span class="string">"张三"</span>,<span class="attr">car</span>:&#123;<span class="attr">number</span>:<span class="string">"2017"</span>,<span class="attr">type</span>:<span class="string">"火车"</span>&#125;&#125;;</div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"><span class="comment">//obj对象需要拷贝o对象中所有的属性</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> o )&#123;</div><div class="line">    obj[i]  = o[i];</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(obj);</div><div class="line">o.car.type = <span class="string">"飞船"</span>;</div><div class="line"><span class="built_in">console</span>.log(obj);</div></pre></td></tr></table></figure></p>
<p><strong>深拷贝</strong></p>
<pre><code>如果对象中的属性是值类型,那么就直接拷贝赋值
如果对象中的属性是引用类型,那么就再次调用拷贝方法,遍历对象
</code></pre><p>代码示例<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">var</span> o = &#123;<span class="attr">name</span>:<span class="string">"张三"</span>,<span class="attr">car</span>:&#123;<span class="attr">number</span>:<span class="string">"2017"</span>,<span class="attr">type</span>:<span class="string">"火车"</span>&#125;&#125;;</div><div class="line"> <span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj,tmp</span>) </span>&#123;</div><div class="line">     tmp = tmp || &#123;&#125;;    <span class="comment">//如果没有传入,那么就创建一个空的对象</span></div><div class="line">     <span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> obj)</div><div class="line">     &#123;</div><div class="line">         <span class="keyword">if</span> (obj.hasOwnProperty(i))   <span class="comment">//只拷贝实例属性</span></div><div class="line">         &#123;</div><div class="line">             <span class="comment">//判断是否是引用类型</span></div><div class="line">             <span class="keyword">if</span> ((<span class="keyword">typeof</span> obj[i]) == <span class="string">'object'</span>)</div><div class="line">             &#123;</div><div class="line">                 <span class="comment">//重新调用拷贝方法</span></div><div class="line">                 tmp[i] = <span class="built_in">Array</span>.isArray(obj[i]) ? [] :&#123;&#125;;</div><div class="line">                 deepCopy(obj[i],tmp[i]);</div><div class="line">             &#125;<span class="keyword">else</span></div><div class="line">             &#123;</div><div class="line">                 <span class="comment">//直接拷贝</span></div><div class="line">                 tmp[i] = obj[i];</div><div class="line">             &#125;</div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line">deepCopy(o,obj);</div><div class="line"> <span class="built_in">console</span>.log(obj);</div><div class="line"> o.car.type = <span class="string">"测试的类型"</span>;</div><div class="line"> <span class="built_in">console</span>.log(obj);</div><div class="line"> <span class="built_in">console</span>.log(o);</div></pre></td></tr></table></figure></p>
<p><strong>注意isArray的兼容性问题</strong><br>isArray是ECMA5中新推出的方法,需要处理兼容性问题<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="built_in">Array</span>.isArray != <span class="string">"function"</span>)</div><div class="line">&#123;</div><div class="line">    <span class="built_in">Array</span>.isArray = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) == <span class="string">'[object Array]'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Number原型扩展"><a href="#Number原型扩展" class="headerlink" title="Number原型扩展"></a>Number原型扩展</h2><p>小案例：在Number的原型对象上面定义一个新的方法add(),该方法接收一个参数,并将该参数与自身的值进行相加,然后进行返回。<br>代码实现<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Number</span>.prototype.add = <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span> + num;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> n = <span class="number">10</span>;</div><div class="line"><span class="built_in">console</span>.log(n.add(<span class="number">3</span>));</div><div class="line"><span class="comment">//console.log(5.add(5));  错误:解析器无法处理字面量的这种情况</span></div><div class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">50</span>);</div><div class="line"><span class="built_in">console</span>.log(num.add(<span class="number">20</span>));       <span class="comment">//70</span></div><div class="line"><span class="built_in">console</span>.log((<span class="number">1</span>).add(<span class="number">4</span>));        <span class="comment">//5 使用()把数字包起来</span></div></pre></td></tr></table></figure></p>
<p>使用注意<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">（01）使用数字变量可以调用成功</div><div class="line">（02）使用数字表达式可以调用成功</div><div class="line">（03）直接使用数字字面量方式调用失败</div></pre></td></tr></table></figure></p>
<p>js的语法解析器无法处理数字字面量这种情况。</p>
<h2 id="With语句"><a href="#With语句" class="headerlink" title="With语句"></a>With语句</h2><p><strong>with语句简单介绍</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">with语句是js中一个强大但有争议的特性。</div><div class="line">with语句允许我们将一个对象的所有属性引用到当前的作用域</div><div class="line">允许我们无需使用拥有者对象的前缀，就可以直接对这些属性进行引用和赋值操作。</div></pre></td></tr></table></figure></p>
<p><code>注意</code>：ECMAScript5规范在严格模式下已经禁用了该语句，在开发中不推荐使用，但是要求能够看懂with的代码。</p>
<p><strong>with语句内部细节</strong><br><code>说明</code>： with语句会创建一个作用域，在该作用域内，在引用特定对象的属性时，可以不使用前缀。<br>应用场景：<code>对深层级对象的引用进行缩短</code>。</p>
<p><strong>在with作用域内部引用属性</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">//[01] 测试with语句作用域内对对象属性的引用</span></div><div class="line">    <span class="comment">//01 提供全局变量,名称为testValue</span></div><div class="line">    <span class="keyword">var</span> testValue = <span class="string">'测试使用的全局变量'</span>;</div><div class="line">    <span class="comment">//02 提供对象,对象内部提供属性</span></div><div class="line">    <span class="keyword">var</span> testObject = &#123;</div><div class="line">        <span class="attr">name</span>:<span class="string">'对象的名称属性'</span>,</div><div class="line">        <span class="attr">testValue</span>:<span class="string">'对象内部的属性'</span></div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//03 使用with语句引用</span></div><div class="line">    <span class="keyword">with</span>(testObject)</div><div class="line">    &#123;</div><div class="line">        <span class="built_in">console</span>.log(name);          <span class="comment">//对象的名称属性</span></div><div class="line">        <span class="built_in">console</span>.log(testValue);     <span class="comment">//对象内部的属性</span></div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);          <span class="comment">//window</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(testValue);         <span class="comment">//测试使用的全局变量</span></div><div class="line"><span class="string">``</span><span class="string">`   </span></div><div class="line">总结：</div><div class="line">(1) 在with语句作用域内,对象属性的优先级绝对高于在更层级作用域内定义的同名变量</div><div class="line">(2) this(函数上下文)依然指向window,并不会收到with作用域的影响</div><div class="line"></div><div class="line">**在with作用域内进行赋值操作**</div><div class="line">`<span class="string">``</span>js</div><div class="line">   <span class="comment">//01 提供一个对象,在内部提供属性</span></div><div class="line">    <span class="keyword">var</span> obj = &#123;</div><div class="line">        <span class="attr">name</span>:<span class="string">'对象的内部属性'</span>,</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//02 with语句测试对对象属性的赋值操作</span></div><div class="line">    <span class="keyword">with</span>(obj)</div><div class="line">    &#123;</div><div class="line">        name = <span class="string">'修正对象中name的值'</span>;</div><div class="line">        <span class="comment">//在作用域内部添加变量(思考?该变量是添加为全局作用域还是当前obj对象的属性?)</span></div><div class="line">        age = <span class="string">'25'</span>;</div><div class="line">        showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'name == '</span> + name);</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//测试修改对象属性操作</span></div><div class="line">    <span class="built_in">console</span>.log(obj.name);</div><div class="line">    <span class="comment">//测试添加对象属性操作</span></div><div class="line">    <span class="built_in">console</span>.log(obj.age);             <span class="comment">//undefined</span></div><div class="line">    <span class="comment">//obj.showName();                 //obj.showName is not a function    console.log('____________________');</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name); <span class="comment">//== name == window.name</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.name);</div><div class="line">    <span class="built_in">console</span>.log(name);</div><div class="line">    showName();             <span class="comment">//==this.showName() ==window.showName()</span></div></pre></td></tr></table></figure></p>
<p>总结：<br>（1）在with作用域的内部我们可以使用无前缀引用对象的属性进行读取和赋值的操作 但是 不能使用无前缀的方式添加属性<br>（2）如果使用无前缀的方式来添加属性[对不存在的属性进行赋值操作],那么属性将被添加到全局上下文[window|this]<br>（3）可能产生的错误:意外的引入一个全局变量,而非为with作用域对象添加属性</p>
<p><strong>with语句的问题</strong><br>（1）with作用域内操作优先级混乱<br>（2）性能不好，会大大降低js代码的执行性能<br>（3）ECMAScript5规定在严格模式下禁用with特性</p>
<p><strong>with语句简化代码的替代方案</strong><br>使用即时调用函数来替代with语句，通过函数传参的方式使用更短的引用来替代冗长的引用前缀比使用with语句消除前缀的方式更好。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span>(<span class="keyword">this</span>.style)</div><div class="line">&#123;</div><div class="line">    width = <span class="string">'200px'</span>;</div><div class="line">    height = <span class="string">'200px'</span>;</div><div class="line">    backgroundColor = <span class="string">'#ca3'</span>;</div><div class="line">    <span class="built_in">console</span>.log(width); <span class="comment">//要访问的本应该是外部的字符串变量 "错误哈哈",但是这里被解释为200px</span></div><div class="line">&#125;</div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</div><div class="line">    s.width = <span class="string">'200px'</span>;</div><div class="line">    s.height = <span class="string">'200px'</span>;</div><div class="line">    s.backgroundColor = <span class="string">'#ca3'</span>;</div><div class="line">&#125;)(<span class="keyword">this</span>.style);</div></pre></td></tr></table></figure></p>
<p><strong>使用面向过程的方式处理</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> bookList = [</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"什么是批判"</span>,<span class="attr">author</span>:<span class="string">"福柯"</span>&#125;,</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"飞鸟集"</span>,<span class="attr">author</span>:<span class="string">"泰戈尔"</span>&#125;</div><div class="line">    ];</div><div class="line">    <span class="comment">//增加操作</span></div><div class="line">    bookList.push(&#123;<span class="attr">name</span>:<span class="string">"城堡"</span>,<span class="attr">author</span>:<span class="string">"卡夫卡"</span>&#125;);</div><div class="line">    <span class="comment">//查询操作</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> obj = bookList[i];</div><div class="line">        <span class="keyword">if</span> (obj.name == <span class="string">"飞鸟集"</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="built_in">console</span>.log(obj);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//修改操作</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> obj = bookList[i];</div><div class="line">        <span class="keyword">if</span> (obj.name == <span class="string">"飞鸟集"</span>)</div><div class="line">        &#123;</div><div class="line">            obj.author = <span class="string">"泰戈尔-戈尔泰"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//删除操作</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> obj = bookList[i];</div><div class="line">        <span class="keyword">if</span> (obj.name == <span class="string">"飞鸟集"</span>)</div><div class="line">        &#123;</div><div class="line">            <span class="comment">//删除该对象</span></div><div class="line">            bookList.splice(i, <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(bookList);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p><strong>使用函数来封装图书管理操作</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> bookList = [</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"什么是批判"</span>,<span class="attr">author</span>:<span class="string">"福柯"</span>&#125;,</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"飞鸟集"</span>,<span class="attr">author</span>:<span class="string">"泰戈尔"</span>&#125;</div><div class="line">    ];</div><div class="line">    <span class="comment">//增加操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addBook</span>(<span class="params">bookObj</span>) </span>&#123;</div><div class="line">        bookList.push(bookObj);</div><div class="line">    &#125;</div><div class="line">    addBook(&#123;<span class="attr">name</span>:<span class="string">"城堡"</span>,<span class="attr">author</span>:<span class="string">"卡夫卡"</span>&#125;);</div><div class="line">    <span class="comment">//查询操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getBook</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(getBook(<span class="string">"什么是批判"</span>));</div><div class="line">    <span class="comment">//修改操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">updateBookData</span>(<span class="params">name,authorName</span>)</span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                obj.author = authorName;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    updateBookData(<span class="string">"飞鸟集"</span>,<span class="string">"泰戈尔斯坦"</span>);</div><div class="line">   <span class="comment">//删除操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">removeBook</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                <span class="comment">//删除该对象</span></div><div class="line">                bookList.splice(i, <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(bookList);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p><strong>数封装-复用形式</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    <span class="keyword">var</span> bookList = [</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"什么是批判"</span>,<span class="attr">author</span>:<span class="string">"福柯"</span>&#125;,</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"飞鸟集"</span>,<span class="attr">author</span>:<span class="string">"泰戈尔"</span>&#125;</div><div class="line">    ];</div><div class="line">    <span class="comment">//增加操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addBook</span>(<span class="params">bookObj</span>) </span>&#123;</div><div class="line">        bookList.push(bookObj);</div><div class="line">    &#125;</div><div class="line">    addBook(&#123;<span class="attr">name</span>:<span class="string">"城堡"</span>,<span class="attr">author</span>:<span class="string">"卡夫卡"</span>&#125;);</div><div class="line">    <span class="comment">//查询操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getBook</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(getBook(<span class="string">"什么是批判"</span>));</div><div class="line">    <span class="comment">//修改操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">updateBookData</span>(<span class="params">name,authorName</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> obj = getBook(name);</div><div class="line">        obj.author = authorName;</div><div class="line">    &#125;</div><div class="line">    updateBookData(<span class="string">"飞鸟集"</span>,<span class="string">"泰戈尔斯坦"</span>);</div><div class="line">    <span class="comment">//删除操作</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">removeBook</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> obj = getBook(name);</div><div class="line">        <span class="keyword">var</span> index = bookList.indexOf(obj);</div><div class="line">        bookList.splice(index,<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    addBook(&#123;<span class="attr">name</span>:<span class="string">"东京人"</span>,<span class="attr">author</span>:<span class="string">"川端康成"</span>&#125;);</div><div class="line">    <span class="built_in">console</span>.log(bookList);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p><strong>面向对象的方式管理图书</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">&lt;scrip&gt;</div><div class="line">    <span class="keyword">var</span> obj = [</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"什么是批判"</span>,<span class="attr">author</span>:<span class="string">"福柯"</span>&#125;,</div><div class="line">        &#123;<span class="attr">name</span>:<span class="string">"飞鸟集"</span>,<span class="attr">author</span>:<span class="string">"泰戈尔"</span>&#125;</div><div class="line">    ];</div><div class="line">泰    <span class="function"><span class="keyword">function</span> <span class="title">BookManager</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.bookList = <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">   BookManager.prototype = &#123;</div><div class="line">        <span class="attr">constructor</span>:BookManager,</div><div class="line">        <span class="attr">init</span>:<span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.bookList = arr || [];</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">addBook</span>:<span class="function"><span class="keyword">function</span> (<span class="params">bookObj</span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.bookList.push(bookObj)</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">getBook</span>:<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.bookList.length; i++) &#123;</div><div class="line">            <span class="keyword">var</span> obj = <span class="keyword">this</span>.bookList[i];</div><div class="line">            <span class="keyword">if</span> (obj.name == name)</div><div class="line">            &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">    &#125;,</div><div class="line">        <span class="attr">updateBookData</span>:<span class="function"><span class="keyword">function</span> (<span class="params">name,authorName</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> obj = <span class="keyword">this</span>.getBook(name);</div><div class="line">            obj.author = authorName;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">removeBook</span>:<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> obj = <span class="keyword">this</span>.getBook(name);</div><div class="line">            <span class="keyword">var</span> index = <span class="keyword">this</span>.bookList.indexOf(obj);</div><div class="line">            <span class="keyword">this</span>.bookList.splice(index,<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">//01 创建对象</span></div><div class="line">    <span class="keyword">var</span> YYManager = <span class="keyword">new</span> BookManager();</div><div class="line">    YYManager.init(obj);</div><div class="line">    <span class="built_in">console</span>.log(YYManager.bookList);</div><div class="line">    <span class="comment">//02 演示添加操作</span></div><div class="line">    YYManager.addBook(&#123;<span class="attr">name</span>:<span class="string">"花田半亩"</span>,<span class="attr">author</span>:<span class="string">"田维"</span>&#125;);</div><div class="line">    <span class="built_in">console</span>.log(YYManager.bookList);</div><div class="line">    <span class="comment">//03 演示查询操作</span></div><div class="line">    <span class="built_in">console</span>.log(YYManager.getBook(<span class="string">"花田半亩"</span>));</div><div class="line">    <span class="comment">//04 演示更新操作</span></div><div class="line">    YYManager.updateBookData(<span class="string">"花田半亩"</span>,<span class="string">"甜田"</span>);</div><div class="line">    <span class="built_in">console</span>.log(YYManager.getBook(<span class="string">"花田半亩"</span>));;</div><div class="line">    <span class="comment">//05 演示删除操作</span></div><div class="line">    YYManager.removeBook(<span class="string">"什么是批判"</span>);</div><div class="line">    <span class="built_in">console</span>.log(YYManager.bookList);</div><div class="line">    <span class="comment">//02 创建第二个人的图书管理对象</span></div><div class="line">    <span class="keyword">var</span> wulitaotaoMManager = <span class="keyword">new</span> BookManager();</div><div class="line">    wulitaotaoMManager.init([&#123;<span class="attr">name</span>:<span class="string">"装逼速成"</span>,<span class="attr">author</span>:<span class="string">"六扇门"</span>&#125;]);</div><div class="line">    <span class="built_in">console</span>.log(wulitaotaoMManager.bookList);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>总结<br>01 提供构造函数，在构造函数内部设置实例化属性<br>02 把常用的操作提取成对象的实例方法，写在原型对象身上<br>03 提供init方法，用于初始化数据<br>04 注意：如果切断了原型对象那么需要修正内部的构造器属性指向</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-03-05</span><i class="fa fa-tag"></i><a href="/categories/JavaScript简明教程/" title="JavaScript简明教程" class="tag">JavaScript简明教程 </a><a href="/tags/JavaScript/" title="JavaScript" class="tag">JavaScript </a><a href="/tags/简明教程/" title="简明教程" class="tag">简明教程 </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://yoursite.com/2016/03/05/js-04/,Hexo,JavaScript简明教程（4）,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2016/03/18/js-05/" title="JavaScript简明教程（5）" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2016/02/18/js-3/" title="JavaScript简明教程（3）" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>